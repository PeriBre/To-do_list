<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="todoContainer"></div>
    <p id="outtext"></p>
    <script>

        
            let todoContainer = document.getElementById("todoContainer");
            let outtext = document.getElementById("outtext");

            loadData();

            async function loadData(){

                let cfg = {
                    method: "GET"
                }

                try{
                    let response = await fetch(("/gettodoTitle"), cfg);
                    let data = await response.json();
                
                   for(let tododata of data.rows){

                        let list = tododata.array_agg + '';
                        list = list.split(",");


                        let div = document.createElement("div");
                        
                         let html= `
                            <h2>${tododata.Title_Name}</h2>
                            `
                        for(let i = 0; i<list.length; i++){
                            html += `<ul><li>${list[i]}</li></ul>`;
                        }

                        div.innerHTML = html;
                        todoContainer.appendChild(div); 
                } 
                }catch(err){
                    outtext.innerHTML = err;
            }}


    </script>
    
</body>
</html>